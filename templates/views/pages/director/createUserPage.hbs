<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New User</title>

  {{!--
  <link rel="stylesheet" href="../css/sidemenu.css"> --}}

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="../css/new-user.css">

  <style>
    #profileImage {
      height: 120px;
      width: 120px;
    }
  </style>
</head>

<body>
  {{> navbar }}

  <div class="container-flex">
    <div class="row m-0">
      <div class="col-2 p-0 position-fixed">
        {{> directorSidebar }}
      </div>
      <div class="col-9" style="margin: 3% 20%;">
        {{#if success}}


        <div class="alert alert-success alert-dismissible fade show" role="alert">
          <strong>Thank You!!</strong> User Created
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        {{/if}}
        <form action="/user/createUser" method="post" enctype='multipart/form-data'>
          <div class="container my-4">
            <h1>New User Details</h1>
            <hr>
            <input type="text" placeholder="Name" name="username" id="name" required>

            <input type="email" placeholder="Email" name="email" id="email" required>

            <input type="password" placeholder="Password" name="password" id="psw" required>

            <label>Select Your Role</label>
            <select id="role" name="role" required>
              <option value="Director">Director</option>
              <option value="LabHead">LabHead</option>
              <option value="Tester">Tester</option>
              <option value="Reception">Reception</option>
              <option value="Finance">Finance</option>
            </select>

            <h6 class="mt-3 mb-0">Preview</h6>
            <div id="profile-container">
              <image id="profileImage" alt="Upload Photo" />
            </div>
            <input id="imageUpload" type="file" name="profile_photo" placeholder="Upload Photo" required capture>
            <hr>

            <button type="submit" class="registerbtn">Add User</button>
            <button type="submit" class="cancelbtn">Cancel</button>
          </div>

          <!-- <div class="container signin">
          <p>Already have an account? <a href="#">Sign in</a>.</p>
        </div> -->
        </form>
      </div>
    </div>
  </div>


  <script>
    $("#profileImage").click(function (e) {
      $("#imageUpload").click();
    });
    function fasterPreview(uploader) {
      if (uploader.files && uploader.files[0]) {
        $('#profileImage').attr('src',
          window.URL.createObjectURL(uploader.files[0]));
      }
    }
    $("#imageUpload").change(function () {
      fasterPreview(this);
    });
  </script>
</body>

</html>